<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="img/fav-icon-lugor.png">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body>

    <div class="container">
        <main>
            <div class="box">
                <h1>
                    Entrar no Lugor.
                </h1>
                <h5 class="erro" id="erro" name="erro">Login incorreto. Tente novamente</h5>
                <h2>
                    Usuário
                </h2>
                <h3>
                    <input type="text" id="user" name="user" class="user">
                </h3>
                <h2>
                    Senha
                </h2>
                <h3>
                    <input type="password" id="pass" name="pass" class="pass">
                </h3>
                <h4>
                    <a class="recover" id="recover" href="#">
                        Esqueci a senha
                    </a>
                </h4>
                <button id="button-login" class="button-login" name="button-login">
                    Login
                </button>

                <div id="modalEsqueciSenha" class="modalEsqueciSenha">
                    <label for="emailEsqueciSenha">Digite um email para recuperar sua senha</label>
                    <input type="email">
                    <button type="submit" id="entrar">Enviar</button>
                </div>
            </div>
        </main>
    </div>


</body>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(".erro").hide();
    $(document).ready(function () {
        $("button[name = 'button-login']").click(function () {
            var user = $("input[name = 'user']").val();
            var password = $("input[name = 'pass']").val();
            $.post("verifica-login.php", { email: user, senha: password }, function (resultado) {
                if (resultado == "nexiste") {
                    $(".erro").show();
                } else {
                    $(".erro").hide();
                }
            });
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {

        //Botão Esqueci a Senha
        var btnEsqueciSenha = document.getElementById("recover");

        //Modal Esqueci a Senha
        var modalEsqueciSenha = document.getElementById("modalEsqueciSenha");

        //Inicializando o display do modal como none
        modalEsqueciSenha.style.display = "none";

        var botaoClicado;

        //Quando clicado no botão Esqueci a Senha, mostra o modal
        btnEsqueciSenha.addEventListener("click", function () {
            modalEsqueciSenha.style.display = "block";
            setTimeout(function(){
                modalEsqueciSenha.classList.add("show");
            }, 50);
            
            botaoClicado = true;
        });

        window.addEventListener("click", function (event) {
            if (botaoClicado == false) {
                if (!(event.target == modalEsqueciSenha)) {
                    modalEsqueciSenha.style.display = "none";
                }
            } else {
                botaoClicado = false;
            }

        })
    });
</script>

</html>